<!DOCTYPE HTML>
<html>

<head>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <!-- https://css-tricks.com/intro-to-vue-2-components-props-slots/ -->
    
    <title>Planet Express</title>
</head>

<body>
    <div class="container">
        <h2>The Planetarium</h2>
        <ul class='list-group'>
            <Planets v-for="planet in planets" :deets="planet" key='planet.id'></Planets>
        </ul>
        <pre>{{ $data }}</pre>
    </div>
</body>
<template id="planetemplate">
    <li class="list-group-item">
        Planet Name: {{ deets.name}}<br>
        Number of Visits: {{ deets.visits }} &nbsp; &nbsp; &nbsp; &nbsp;
        <button v-show='!deets.maxedOut' @click="addVisit">Visit</button>
        <span v-show='deets.visited' class="glyphicon glyphicon-globe pull-right glyphicon-center"></span>
    </li>
</template>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.3.4/vue.js"></script>
<script>
    Vue.component ('Planets', {
        template: '#planetemplate',
        props: ['deets'],
        methods: {
            addVisit: function() {
                this.deets.visited = true;
                this.deets.visits += 1
                if (this.deets.visits >= 3) {
                    this.deets.maxedOut = true;
                };
            },
            // maxed: function () {
            //     if (this.deets.visits >= 3) {
            //         this.deets.maxedOut = true;
            //     }
            // },
        }
    })
    new Vue({
        el: '.container',
        data: {
            planets: [
                {
                    name: 'Zorbnak',
                    visits: 0,
                    visited: false,
                    maxedOut: false,
                },
                {
                    name: 'Flerbish Seven',
                    visits: 0,
                    visited: false,
                    maxedOut: false,
                },
                {
                    name: 'Tesselbaum',
                    visits: 0,
                    visited: false,
                    maxedOut: false,
                },
                {
                    name: 'Cavendish',
                    visits: 0,
                    visited: false,
                    maxedOut: false,
                },
            ],
        },
    })
</script>

</html>